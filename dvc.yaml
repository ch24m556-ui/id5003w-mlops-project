stages:
  preprocess:
    cmd: python src/data_processing.py --train_input data/raw/train.csv --test_input data/raw/test.csv --output_path data/processed --baseline_sample_path data/baseline_sample
    deps:
      - data/raw/test.csv
      - data/raw/train.csv
      - src/data_processing.py
    outs:
      - data/processed
      - data/baseline_sample

  # --- NOTE: Drift detection is temporarily disabled for direct model experimentation. ---
  
  train:
    cmd: >-
      python src/train.py 
      --train_data data/processed/train 
      --model_out model/spark_model 
      --profile ${experiment_profile}
    deps:
      - data/processed
      - src/train.py
      - params.yaml
    params:
      - experiment_profile
    outs:
      - model/spark_model
    metrics:
      - metrics.json:
          cache: false

