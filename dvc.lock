schema: '2.0'
stages:
  preprocess:
    cmd: python src/data_processing.py --train_input data/raw/train.csv 
      --test_input data/raw/test.csv --output_path data/processed 
      --baseline_sample_path data/baseline_sample
    deps:
    - path: data/raw/test.csv
      hash: md5
      md5: 7533b82eae4b582610cbd68aa636b017
      size: 28629
    - path: data/raw/train.csv
      hash: md5
      md5: 2dec0871c16cf96c3bfe73563e55fbc6
      size: 209188
    - path: src/data_processing.py
      hash: md5
      md5: 44241a638adf88449a3db17ebd789ce0
      size: 4868
    outs:
    - path: data/baseline_sample
      hash: md5
      md5: 568d54ee6f5d072e3d381f650669d0dd.dir
      size: 10479
      nfiles: 4
    - path: data/processed
      hash: md5
      md5: a6f5c0cf94e0581d7ce164994336e611.dir
      size: 33138
      nfiles: 10
  validate_data:
    cmd: python src/validate_data.py --new_data data/processed/train 
      --baseline_sample data/baseline_sample --output_status_path 
      drift_status.json
    deps:
    - path: data/baseline_sample
      hash: md5
      md5: 568d54ee6f5d072e3d381f650669d0dd.dir
      size: 10479
      nfiles: 4
    - path: data/processed/train
      hash: md5
      md5: bdfcaee90fdb3389452d7cd4d25002eb.dir
      size: 25063
      nfiles: 4
    - path: src/validate_data.py
      hash: md5
      md5: c3b203045b85c4848df0580f161338c3
      size: 3983
    outs:
    - path: drift_status.json
      hash: md5
      md5: 4a757b08b3b6a4d3c2be02817f5c30e7
      size: 33
  train:
    cmd: python src/train.py  --train_data data/processed/train  --model_out 
      model/spark_model  --profile more_cores
    deps:
    - path: data/processed
      hash: md5
      md5: 5d05a5bc96b30fe3422b354b7e171316.dir
      size: 23094
      nfiles: 10
    - path: params.yaml
      hash: md5
      md5: 2e2c92dcc42f4bab0b01dd92b25e261f
      size: 722
    - path: src/train.py
      hash: md5
      md5: 4acc642a8017443b18b0af0fbcbbb48a
      size: 10668
    params:
      params.yaml:
        experiment_profile: more_cores
    outs:
    - path: metrics.json
      hash: md5
      md5: 2748d30b36a7f1b6a6fae5c3c3bb8eb5
      size: 64
    - path: model/spark_model
      hash: md5
      md5: 82dc1b6159ccd6557da9c71962a32675.dir
      size: 13354
      nfiles: 64
  trigger_retraining:
    cmd: python src/trigger_training.py  --train_data data/processed/train 
      --model_out model/spark_model  --profile baseline
    deps:
    - path: data/processed/train
      hash: md5
      md5: c1dd6ea600bfd377cb68e69740545265.dir
      size: 22892
      nfiles: 4
    - path: drift_status.json
      hash: md5
      md5: 4a757b08b3b6a4d3c2be02817f5c30e7
      size: 33
    - path: params.yaml
      hash: md5
      md5: 8ea6183545059035720705720c90b7cc
      size: 720
    - path: src/train.py
      hash: md5
      md5: 4acc642a8017443b18b0af0fbcbbb48a
      size: 10668
    - path: src/trigger_training.py
      hash: md5
      md5: 9624172f8697b500cb456dbb43b3c784
      size: 2536
    params:
      params.yaml:
        experiment_profile: baseline
    outs:
    - path: metrics.json
      hash: md5
      md5: 8a504bf0d9f8299245467e572f9e5c30
      size: 54
    - path: model/spark_model
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
  create_baseline:
    cmd: python src/create_baseline.py --train_input data/raw/train.csv 
      --baseline_output data/baseline_sample
    deps:
    - path: data/raw/train.csv
      hash: md5
      md5: 62ac5773446c60e491ca8f06093fc9b4
      size: 134098
    - path: src/create_baseline.py
      hash: md5
      md5: 75fad90fc211238d088578f68f224063
      size: 1386
    outs:
    - path: data/baseline_sample
      hash: md5
      md5: c0498f2eb7d38eed40dc5f0a43cf75d8.dir
      size: 22035
      nfiles: 4
  trigger_training:
    cmd: python src/trigger_training.py  --train_data data/processed/train  
      --model_out model/spark_model  --profile more_cores
    deps:
    - path: data/processed/train
      hash: md5
      md5: bdfcaee90fdb3389452d7cd4d25002eb.dir
      size: 25063
      nfiles: 4
    - path: drift_status.json
      hash: md5
      md5: 4a757b08b3b6a4d3c2be02817f5c30e7
      size: 33
    - path: params.yaml
      hash: md5
      md5: 2e2c92dcc42f4bab0b01dd92b25e261f
      size: 722
    - path: src/train.py
      hash: md5
      md5: 14c805562b9e1e2919507d75c6a3c937
      size: 17303
    - path: src/trigger_training.py
      hash: md5
      md5: 90492e138691b5386e89063d8aeab48f
      size: 2403
    params:
      params.yaml:
        experiment_profile: more_cores
    outs:
    - path: metrics.json
      hash: md5
      md5: 9ab4a9ea4cd8bd71563eb1edb523c959
      size: 221
    - path: model/spark_model
      hash: md5
      md5: b1df7f15cc1ba3d8e50fefdf541de203.dir
      size: 18263
      nfiles: 64
